css:
  #editor {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
  }

.row
  .span6
    font style="font-size: 27pt" Editing #{params[:filename]}
.row
  .span12
    textarea id="editor" cols="50" rows="1000"
      == @file_data

.row.text-center style="margin-top: 10px"
  .span4
    a.btn.btn-large.btn-warning href="/dashboard" <i class="icon-remove"></i>&nbsp;&nbsp;Finish Without Saving
  .span4
    a.btn.btn-large.btn-success href="#" onclick="saveTextFile(false); return false" <i class="icon-save"></i>&nbsp;&nbsp;Save Changes
  .span4
    a.btn.btn-large.btn-info href="#" onclick="saveTextFile(true); return false" <i class="icon-save"></i>&nbsp;&nbsp;Save and Finish

.row style="margin-top: 20px"
  .span6.offset3.text-center
    div id="editorUpdates" class="alert alert-success hidden"
      span
  span6
    a href="/site_files/live_editor/#{params[:filename]}" title="may mess with javascript" Live Edit (experimental)

script src="/ckeditor/ckeditor.js"
javascript:
  CKEDITOR.replace('editor');
  function saveTextFile(quit) {
    $.ajax({
      url: '/site_files/save/#{params[:filename]}',
      data: CKEDITOR.instances.editor.getData(),
      processData: false,
      contentType: false,
      type: 'POST',
      success: function(response){
        if(response == 'ok') {
          if(quit === true) {
            window.location = '/dashboard';
          }
          $('#editorUpdates span').html('<i class="icon-save icon-2x"></i>&nbsp;&nbsp;<font style="font-size: 14pt">Your file has been saved.</font>');
          setTimeout(function() {
            $('#editorUpdates').fadeOut();  //.addClass('hidden');
          }, 2000);

        } else {
          $('#editorUpdates span').text(response);
        }
        $('#editorUpdates').fadeIn();
        $('#editorUpdates').removeClass('hidden');

      }
    });
  }
